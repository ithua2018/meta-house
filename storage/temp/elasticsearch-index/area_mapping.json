{
    "settings":{
        "index.number_of_replicas":"1",
        "index.number_of_shards":"5",
        "index.translog.flush_threshold_size":"512mb",
        "index.translog.sync_interval":"60s",
        "index.codec":"best_compression",
        "analysis":{
            "filter":{
                "edge_ngram_filter":{
                    "type":"edge_ngram",
                    "min_gram":1,
                    "max_gram":50
                },
                "pinyin_simple_filter":{
                    "type":"pinyin",
                    "keep_first_letter":true,
                    "keep_separate_first_letter":true,
                    "keep_full_pinyin":false,
                    "keep_original":false,
                    "limit_first_letter_length":50,
                    "lowercase":true
                },
                "pinyin_full_filter":{
                    "type":"pinyin",
                    "keep_first_letter":false,
                    "keep_separate_first_letter":false,
                    "keep_full_pinyin":true,
                    "none_chinese_pinyin_tokenize":true,
                    "keep_original":false,
                    "limit_first_letter_length":50,
                    "lowercase":true
                },
                "t2s_convert":{
                    "type":"stconvert",
                    "delimiter":",",
                    "convert_type":"t2s"
                }
            },
            "char_filter":{
                "charconvert":{
                    "type":"mapping",
                    "mappings_path":"char_filter_text.txt"
                },
                "tsconvert":{
                    "type":"stconvert",
                    "convert_type":"t2s"
                }
            },
            "analyzer":{
                "pinyin_analyzer":{
                    "tokenizer":"my_pinyin"
                },
                "ngramIndexAnalyzer":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "edge_ngram_filter",
                        "lowercase"
                    ],
                    "char_filter":[
                        "charconvert",
                        "tsconvert"
                    ]
                },
                "ngramSearchAnalyzer":{
                    "type":"custom",
                    "tokenizer":"keyword",
                    "filter":[
                        "lowercase"
                    ],
                    "char_filter":[
                        "charconvert",
                        "tsconvert"
                    ]
                },
                "ikIndexAnalyzer":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "char_filter":[
                        "charconvert",
                        "tsconvert"
                    ]
                },
                "ikSearchAnalyzer":{
                    "type":"custom",
                    "tokenizer":"ik_smart",
                    "char_filter":[
                        "charconvert",
                        "tsconvert"
                    ]
                },
                "pinyiSimpleIndexAnalyzer":{
                    "tokenizer":"keyword",
                    "filter":[
                        "pinyin_simple_filter",
                        "edge_ngram_filter",
                        "lowercase"
                    ]
                },
                "pinyiSimpleSearchAnalyzer":{
                    "tokenizer":"keyword",
                    "filter":[
                        "pinyin_simple_filter",
                        "lowercase"
                    ]
                },
                "pinyiFullIndexAnalyzer":{
                    "tokenizer":"keyword",
                    "filter":[
                        "pinyin_full_filter",
                        "lowercase"
                    ]
                },
                "pinyiFullSearchAnalyzer":{
                    "tokenizer":"keyword",
                    "filter":[
                        "pinyin_full_filter",
                        "lowercase"
                    ]
                },
                "tsconvert":{
                    "tokenizer":"tsconvert"
                }
            },
            "tokenizer":{
                "tsconvert":{
                    "type":"stconvert",
                    "delimiter":"#",
                    "keep_both":false,
                    "convert_type":"t2s"
                },
                "my_pinyin":{
                    "type":"pinyin",
                    "keep_first_letter":true,
                    "keep_separate_first_letter":true,
                    "keep_full_pinyin":true,
                    "keep_original":false,
                    "limit_first_letter_length":16,
                    "lowercase":true,
                    "remove_duplicated_term" : true
                }
            }
        }
    },
    "mappings":{
        "dynamic":"strict",
        "properties":{
            "@timestamp":{
                "type":"date"
            },
            "@version":{
                "type":"keyword"
            },
            "id":{
                "type":"keyword"
            },
            "pid":{
                "type":"keyword"
            },
            "deep":{
                "type":"integer"
            },
            "name":{
                "type":"text",
                "fields":{
                    "ngram":{
                        "type":"text",
                        "analyzer":"ngramIndexAnalyzer"
                    },
                    "spy":{
                        "type":"text",
                        "analyzer":"pinyiSimpleIndexAnalyzer"
                    },
                    "fpy":{
                        "type":"text",
                        "analyzer":"pinyiFullIndexAnalyzer"
                    },
                    "iks":{
                        "type":"text",
                        "analyzer":"ikIndexAnalyzer"
                    },
                    "pinyin":{
                        "type":"text",
                        "store":false,
                        "term_vector":"with_offsets",
                        "analyzer":"pinyin_analyzer",
                        "boost":10
                    }
                }
            },
            "pinyin_prefix":{
                "type":"keyword"
            },
            "pinyin":{
                "type":"keyword"
            },
            "ext_id":{
                "type":"keyword"
            },
            "ext_name":{
                "type":"text"
            }
        }
    }
}
